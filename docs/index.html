<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/antlir/blog/rss.xml" title="Antlir Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/antlir/blog/atom.xml" title="Antlir Blog Atom Feed"><title data-react-helmet="true">Overview | Antlir</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Overview | Antlir"><meta data-react-helmet="true" name="description" content="What is Antlir?"><meta data-react-helmet="true" property="og:description" content="What is Antlir?"><meta data-react-helmet="true" property="og:url" content="https://facebookincubator.github.io/antlir/antlir/docs/"><link data-react-helmet="true" rel="shortcut icon" href="/antlir/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://facebookincubator.github.io/antlir/antlir/docs/"><link rel="stylesheet" href="/antlir/styles.e975dfe0.css">
<link rel="preload" href="/antlir/styles.ae76be6c.js" as="script">
<link rel="preload" href="/antlir/runtime~main.28d5a9b1.js" as="script">
<link rel="preload" href="/antlir/main.651de6d2.js" as="script">
<link rel="preload" href="/antlir/1.10ea5d7f.js" as="script">
<link rel="preload" href="/antlir/2.f31c0aff.js" as="script">
<link rel="preload" href="/antlir/35.19fd0114.js" as="script">
<link rel="preload" href="/antlir/36.905071a9.js" as="script">
<link rel="preload" href="/antlir/935f2afb.c12170c1.js" as="script">
<link rel="preload" href="/antlir/17896441.55df4409.js" as="script">
<link rel="preload" href="/antlir/1db64337.8e0fcd83.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/antlir/"><img src="/antlir/img/logo.svg" alt="My Facebook Project Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/antlir/img/logo.svg" alt="My Facebook Project Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Antlir</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/antlir/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebookincubator/antlir" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/antlir/"><img src="/antlir/img/logo.svg" alt="My Facebook Project Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/antlir/img/logo.svg" alt="My Facebook Project Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Antlir</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/antlir/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/facebookincubator/antlir" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/antlir/docs/">Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/antlir/docs/getting_started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/antlir/docs/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/antlir/docs/tutorials/defining-an-image">Defining an Image</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Concepts &amp; Design</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">RPMs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/concepts/rpms/how-rpms-are-updated">How RPMs are Updated</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/concepts/rpms/using-rpms-in-images">Using RPMs in Images</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/concepts/rpms/version-selection">Version Selection</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Pre-built Artifacts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/concepts/pre-built-artifacts/fetched-artifacts">Fetched Artifacts</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/antlir/docs/api/image">Image</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">nspawn Runtime</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/runtime/nspawn-runtime/image-unittest">image.*_unittest</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">VM Runtime</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/runtime/vm-runtime/vm-unittest">vm.*_unittest</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/antlir/docs/api/shape">Shape</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Coding Conventions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/contributing/coding-conventions/bzl-and-targets">.bzl and TARGETS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/contributing/coding-conventions/pyre">Pyre</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/contributing/coding-conventions/python">Python</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">TODOs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/contributing/todos/btrfs_diff">btrfs_diff/</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/antlir/docs/contributing/todos/compiler">compiler/</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/antlir/docs/installing">Installation</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Overview</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="what-is-antlir"></a>What is Antlir?<a class="hash-link" href="#what-is-antlir" title="Direct link to heading">#</a></h2><p>Antlir can <strong>reproducibly build</strong>, <strong>test</strong>, and <strong>run</strong> OS images for
containers and hosts.</p><p>Images are specified as <a href="https://buck.build/" target="_blank" rel="noopener noreferrer">Buck</a> build targets, which
<strong>declaratively compose</strong> Antlir‚Äôs
<a href="https://github.com/bazelbuild/starlark" target="_blank" rel="noopener noreferrer">Starlark</a> macros.  Our image
language supports inheritance (aka layering), as well as functional
composition.  The API is safe by design:</p><ul><li>detects filesystem conflicts, and fails at build-time</li><li>avoids constructs with non-deterministic or implicit behavior</li><li>prevents sequencing bugs by automatically dependency-sorting actions</li></ul><p>Builds are <strong>fast</strong> thanks to a combination of Buck parallelism, caching,
and Antlir‚Äôs usage of the <code>btrfs</code> copy-on-write filesystem (NB: we use a
loopback, so no need to reformat your host FS).</p><p>Antlir supports a variety of <strong>image packaging</strong> styles, including tarballs,
<a href="https://en.wikipedia.org/wiki/Cpio" target="_blank" rel="noopener noreferrer">cpio</a>,
<a href="https://en.wikipedia.org/wiki/SquashFS" target="_blank" rel="noopener noreferrer">SquashFS</a>,
<a href="https://btrfs.wiki.kernel.org/index.php/Main_Page" target="_blank" rel="noopener noreferrer">btrfs</a> loopbacks and
sendstreams.  We are now working on a package-centric deployment format,
which implicitly shares content between related images, or versions of
images ‚Äî reducing container update time, and disk usage, and enabling
package-level hotfixes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="easy-maintainable-efficient-image-deployment"></a>Easy, maintainable, efficient image deployment<a class="hash-link" href="#easy-maintainable-efficient-image-deployment" title="Direct link to heading">#</a></h2><p>Before Antlir, a typical image deployment workflow might look like this:</p><ul><li>Write a script to compose and package an image.</li><li>For each new application, copy or refactor the script to accommodate it,
and build a new redistributable.</li><li>Struggle with the maintenance weight of undeclared dependencies, code
duplication, and expensive updates.</li></ul><p>Antlir‚Äôs feature-set helps you move away from monolithic ‚Äúkitchen sink‚Äù
images, and instead focus on developing, testing, and composing ‚Äúimage
features‚Äù.  Features can blend packaging and configuration management,
specifying either the binaries to deploy, or their configuration, or both.
Antlir does not prevent the use of runtime configuration management, but it
makes it easy to do what <em>can</em> be done at build-time, so that your
application can be tested and deployed safely.  With Antlir, you would:</p><ul><li>Split the commonly used parts of your OS filesystem into layers, for
better build speed and uniformity of infrastructure.  Layers are a good
point of ownership, since they can be tested and released as pre-built
artifacts.</li><li>Compose the layers from features, maximizing code clarity and reuse.
Each feature can be tested with minimal images ‚Äî this is the
image-building analog of unit tests.</li><li>Specialize the few shared layers into many per-application layers.  Each
application gains clear dependencies, and control of its release cycle.
Since the parent layers and features have their own tests, the
application owner can focus on testing their integration, without
worrying about the OS.  Lastly, with the upcoming package-centric
deployment, each application will only pay for the new bytes that it
adds to the image.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="reproducibility"></a>Reproducibility<a class="hash-link" href="#reproducibility" title="Direct link to heading">#</a></h2><p>For a fixed source control revision, <code>buck build //image:target</code> should
produce a <strong>functionally identical</strong> image, no matter who runs the build, or
when.  For now, images are <em>not</em> bitwise-reproducible:</p><ul><li>We make no effort to eliminate C/C++ compiler entropy,</li><li>We do not prevent the embedding of ‚Äúbuild info‚Äù<sup id="fnref-build_info"><a href="#fn-build_info" class="footnote-ref">build_info</a></sup> (such as
time, host, source control, etc) into the build output.</li></ul><p>However, we do go to significant lengths to eliminate functional variation.
Specifically:</p><ul><li>Image assembly happens in containers with no network access.  Use
<a href="https://buck.build/rule/http_file.html" target="_blank" rel="noopener noreferrer"><code>http_file</code></a> for out-of-repo
resources.</li><li>RPM installs do not talk to ‚Äúlive‚Äù repos, which can change at any time.
Instead, we commit a reference to a fixed ‚Äúrepo snapshot‚Äù into source
control, and use that to install repo-deterministic packages.  As part
of the default ‚Äúbuild appliance‚Äù (<strong>TODO</strong> link to definition), we
maintain snapshots for commonly-used distros.  If you need your own repo
snapshots, Antlir comes with the tools to maintain them.</li><li>Buck is designed for repo-deterministic builds ‚Äî its distributed cache
semantics will break if a build is not repo-hermetic.  Specifically, if
host <em>A</em> builds and caches an artifact, and host <em>B</em> later uses it, the
artifact must be functionally substitutable, or host <em>B</em>‚Äôs output will
be incorrect.  So, the output of each Buck rule must only depend on its
inputs, and the inputs themselves should be functions of the current
repo rev, Buck config options, and nothing else.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="benefits-of-reproducibly-built-images"></a>Benefits of reproducibly built images<a class="hash-link" href="#benefits-of-reproducibly-built-images" title="Direct link to heading">#</a></h3><ul><li><strong>Easy-to-debug production builds.</strong> If your image is misbehaving, just
check out the source control revision that built it, and make a patch to
instrument the build.  Now you have an instrumented image that is very
likely to reproduce your problem.</li><li><strong>Safer hotfixes.</strong> With images, services get predictable filesystems:
<em>what you build is what you test, is what you deploy</em>.  Let‚Äôs say you
find a bug in production, and need to apply a small patch to fix it.  If
your build is not reproducible, rebuilding with the hotfix can bring in
unrelated changes, turning your hotfix into a larger outage.</li><li><strong>Bisects from source control.</strong> For any service breakage, whether
caused by your binary, or by its OS dependencies, you can use the
‚Äúbisect‚Äù feature of your version-control system to easily find the
offending change.</li><li><strong>Auditing of build artifacts.</strong> Given trusted source code, and a built
artifact, reproducibility is essential for validating that the artifact
was in fact built from the source.  This lets you monitor for
compromised build hosts.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="pre-built-artifacts"></a>Pre-built artifacts<a class="hash-link" href="#pre-built-artifacts" title="Direct link to heading">#</a></h2><p>A common development pattern is that you have one team maintaining a layer,
which is used by many other teams.</p><p>In such a case, it is possible that a single change to this parent layer
will break many child layers.  It can therefore be preferable for the common
image to be built and tested from source control, and then released
gradually to customers as a pre-build artifact.</p><p>Releasing common image layers as pre-built artifacts can also speed up build
time for the teams that depend on it.</p><p>For a concrete example of a pre-built artifact, consider the ‚Äúbuild
appliance‚Äù image (<strong>TODO</strong> link).  This is a pre-built image, which contains
all that is necessary to build new images, including tooling and RPM repo
snapshots.</p><p>Antlir comes with first-class support for pre-built images, including:</p><ul><li>fetching them from external blob-stores &amp; validating checksums (<strong>TODO</strong>
link to impl)</li><li>using them in builds ‚Äî just import your downloaded blob to present an
<code>image.layer</code>-like build-time interface, see e.g.
<code>image.sendstream_layer</code></li><li>packaging them via <code>image.package</code></li><li>publishing them to a blob store via <code>buck run</code> (<strong>TODO</strong> link to impl)</li></ul><p>In effect, Antlir comes with all the tools to maintain a basic image
registry.  This of course does not prevent integration with third-party
image registries, but simply exists to allow for reproducible,
closed-ecosystem builds that involve pre-built artifacts. Read more in the
<a href="/antlir/docs/concepts/pre-built-artifacts/fetched-artifacts">pre-built artifacts section</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="bonus-features-of-antlir"></a>Bonus features of Antlir<a class="hash-link" href="#bonus-features-of-antlir" title="Direct link to heading">#</a></h2><p>While these applications are slightly outside of the ‚Äúbuild OS images‚Äù
mission, they are core to the implementation, and will likely be supported
indefinitely.</p><ul><li><strong>Build sandbox:</strong> The Antlir runtime provides a build-time sandbox for
making other build systems reproducible.  Conceptually: you build an
image with all your build dependencies, and then use
<code>image.genrule_layer</code> to run a build step inside it.  For a working
example, check out <code>image_rpmbuild_layer</code>, which is a light analog of
<a href="https://github.com/rpm-software-management/mock/wiki" target="_blank" rel="noopener noreferrer"><code>mock</code></a>, with the
added benefit that <em>both</em> the build image, and the build dependencies
are completely reproducible.</li><li><strong>Non-OS filesystems:</strong> One can, of course, build non-OS filesystem
images ‚Äî and it is even possible to test them by <code>image.layer_mount</code>ing
them into a test layer that does have the OS tools that you need.</li><li><strong>Easy btrfs comparison:</strong> Antlir comes with an elegant toolbox for
validating the entire<sup id="fnref-btrfs_diff"><a href="#fn-btrfs_diff" class="footnote-ref">btrfs_diff</a></sup> contents of btrfs filesystems.  We
use this extensively for integration testing of image builds, for
example, this asserts the <strong>complete</strong> state of an image:<div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-py codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">assertEqual</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;(Dir)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;a_dir&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;(Dir)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;empty_file&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;(File m444)&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    render_subvol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">subvol</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="what-antlir-cannot-yet-do"></a>What Antlir cannot (yet?) do<a class="hash-link" href="#what-antlir-cannot-yet-do" title="Direct link to heading">#</a></h2><ul><li>Bitwise reproducibility of artifacts ‚Äî check back in late 2021 to see if
this changes.</li><li>Non-RPM package managers, although eventual support for <a href="https://wiki.archlinux.org/index.php/pacman" target="_blank" rel="noopener noreferrer">Arch
pacman</a> is likely.  If you
are well-positioned to contribute and maintain  <code>.deb</code> support, we are
eager to support you.</li><li>A ‚Äúproduction-identical‚Äù container runtime.  You get a container when
you <code>buck {test,run}</code> your image, but we lack a tool to run in exactly
the same container runtime on your favorite container manager.  Such
deployment could be supported for limited use-cases, but ‚Äúdeep‚Äù
integration is expensive ‚Äî create a Github issue you want to maintain
such an integration for your favorite runtime.  For now, you can build &amp;
package with Antlir, and deploy it with your production runtime, hoping
that the setup differences are negligible.</li><li>Building images with tools besides Buck ‚Äî though you can certainly
ingest binaries from other build systems by wrapping them with Buck
<a href="https://buck.build/rule/genrule.html" target="_blank" rel="noopener noreferrer"><code>genrule</code></a>s, or <code>foreign_layer</code>s,
see e.g. <code>rpmbuild_layer</code> (<strong>TODO</strong>: link).  We can also imagine a
partnership to integrate similar build systems, especially Bazel, whose
macro layer leverages Starlark with a more powerful composition model.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="footnotes"></a>Footnotes<a class="hash-link" href="#footnotes" title="Direct link to heading">#</a></h2><div class="footnotes"><hr><ol><li id="fn-build_info">The only safe way to embed buildinfo into binariesis via
<code>buck --config buildinfo.timestamp=&quot;$(date +%s)&quot;</code> ‚Äî never shell out to
<code>date</code> as part of a build rule.<a href="#fnref-build_info" class="footnote-backref">‚Ü©</a></li><li id="fn-btrfs_diff"><code>antlir/btrfs_diff</code> knows how to compare all the VFS features
supported by btrfs sendstream v1: special files, xattrs, cloned extents,
etc.  Caveat ‚Äî v1 does not support <code>chattr</code>, but this should be added in v2
or v3.<a href="#fnref-btrfs_diff" class="footnote-backref">‚Ü©</a></li></ol></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebookincubator/antlir/edit/master/website/docs/overview.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/antlir/docs/getting_started"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Getting Started ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-antlir" class="table-of-contents__link">What is Antlir?</a></li><li><a href="#easy-maintainable-efficient-image-deployment" class="table-of-contents__link">Easy, maintainable, efficient image deployment</a></li><li><a href="#reproducibility" class="table-of-contents__link">Reproducibility</a><ul><li><a href="#benefits-of-reproducibly-built-images" class="table-of-contents__link">Benefits of reproducibly built images</a></li></ul></li><li><a href="#pre-built-artifacts" class="table-of-contents__link">Pre-built artifacts</a></li><li><a href="#bonus-features-of-antlir" class="table-of-contents__link">Bonus features of Antlir</a></li><li><a href="#what-antlir-cannot-yet-do" class="table-of-contents__link">What Antlir cannot (yet?) do</a></li><li><a href="#footnotes" class="table-of-contents__link">Footnotes</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Learn</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/antlir/docs/">Documentation</a></li><li class="footer__item"><a href="https://github.com/facebookincubator/antlir" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/antlir" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_31Aa"><img class="footer__logo" alt="Facebook Open Source Logo" src="/antlir/img/oss_logo.png"></a></div><div class="footer__copyright">Copyright ¬© 2021 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/antlir/styles.ae76be6c.js"></script>
<script src="/antlir/runtime~main.28d5a9b1.js"></script>
<script src="/antlir/main.651de6d2.js"></script>
<script src="/antlir/1.10ea5d7f.js"></script>
<script src="/antlir/2.f31c0aff.js"></script>
<script src="/antlir/35.19fd0114.js"></script>
<script src="/antlir/36.905071a9.js"></script>
<script src="/antlir/935f2afb.c12170c1.js"></script>
<script src="/antlir/17896441.55df4409.js"></script>
<script src="/antlir/1db64337.8e0fcd83.js"></script>
</body>
</html>